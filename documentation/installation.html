---
layout: default
title: Documentation
section: documentation
---

<h1>Installation</h1>

This page describes how to build and install mimmo. It covers both the
released and the development versions.

mimmo depends mainly on two open source tools/libraries : cmake and <a href="www.optimad.it/products/bitpit.html">bitpit</a>.
These are expected to be present on the machine on which mimmo is being built.

<h2>Dependencies</h2>

<p>
In order to build mimmo and bitpit library you need at least the following softwares (inside brackets the tested version):
</p>
<ul>
<li>
    a standard compliant C++ compiler, tested are g++ (4.8.5) and Clang (3.4).
    Recent versions of ICC (15) should work, older versions (like 14.0.3)
    are discouraged
</li>
<li>
    CMake (3.13.2)
</li>
<li>
    bitpit (1.6.1)
</li>
<!-- <li>
    lapacke/lapack (3.8.0)
</li>
<li>
    xml2 (2.9.1)
</li> --> <!-- bitpit dependencies --> 
<!-- <li>
    OpenMPI (4.0.0) [optional]
</li> -->
<li>
    cgns (3.3.1) [optional]
</li>
<!--<li>
    hdf5 (1.10.4) [optional]
</li> -->
<li>
    OpenFOAM (16.06) [optional]
</li>
<li>
    vtk (8.1.2) [optional]
</li>
</ul>

<p>
Bitpit modules have additional dependencies, in order to have a list of the required
libraries and softwares, please refer to <a href="http://optimad.github.io/bitpit/documentation/installation.html">bitpit documentation<a>.
</p>

<!-- 
<p>
To take advangate of multi-processor systems, mimmo can be compiled, optionally,
with parallel support. The parallel implementation of mimmo uses the
Message-Passing Interface (MPI). Any MPI implemetation, either OpenMPI, LAM,
or MPICH suffice.
</p>
-->


<h2>Download mimmo source code</h2>

If you are trying to build a mimmo release, download it from the
<a href="{{ site.baseurl }}/downloads/index.html#stable">download page</a>.
For the development version, please follow the
<a href="{{ site.baseurl }}/downloads/index.html#development">instructions</a>
for checking it out from git.

<h2>Configure mimmo with CMake</h2>

<p>Create a build directory where mimmo will be compiled. It is important
to point out the mimmo needs to be always build in a separate build directory.
Do not build in the source directory.
<span class="codebox">
mkdir $HOME/projects/mimmo-build
cd $HOME/projects/mimmo-build
</span>
</p>

<p>Use ccmake (Curses CMake GUI) from the CMake installed location. CCMake is a
Curses based GUI for CMake. To run it go to the build directory and specify as
an argument the source directory (&lt;SOURCE_DIR&gt;) of mimmo:
<span class="codebox">
ccmake &lt;SOURCE_DIR&gt;
</span>
The ccmake configuration process is an iterative process. First select settings
values and run the configuration (key c). After the configuration, new settings
may appear. Select the values for the new settings and run the configration
again. Repeat until all values are set and the generate option is available
(g key).
<p>

<p>
Some variables (advanced variables) and mimmo additional modules are not visible right away. 
To see advanced variables, toggle to advanced mode (t key).
</p>

<p>
To set a variable, move the cursor to the variable and press enter. If it is
a boolean (ON/OFF) it will flip the value. If it is string or file, it will
allow editing of the string. For file and directories, the &lt;tab&gt; key can
be used to complete.
</p>

<h3>mimmo settings</h3>

<dl>
    <dt><strong>CMAKE_BUILD_TYPE</strong></dt>
    <dd>
    Sets the build type. The possible options are:
    <ul>
    <li>
    <i>None</i>, the environment compiler flags are used;
    </li>
    <li>
    <i>Release</i>, using compiler optimization flag <i>-O2</i>; 
    </li>
    <li>
    <i>Debug</i>, related to compiler flags <i>-O0 -fmessage-length=0</i>;
    </li>
    <li>
    <i>RelWithDebInfo</i>, that uses compilation flags <i>-O2 -g</i>; 
    </li>
    <li>
    <i>MinSizeRel</i> to have the smallest binary size.
    </li>
    </ul>
    </dd>

    <dt><strong>ENABLE_PROFILING</strong></dt>
    <dd>
    Set to ON in order to add profiling flag <i>-pg</i> during the compilation.
    </dd>

    <br />    

    <dt><strong>BITPIT_DIR</strong></dt>
    <dd>
    Sets the installation directory of bitpit library (<i>i.e.</i> the directory where the files for findPackage utility reside).
    </dd>

    <br />    

    <dt><strong>BUILD_DOCUMENTATION</strong></dt>
   <dd>
   It defines if the Doxygen documentation has to be built or not. The compiled documentation can be navigated via html browser. 
   <br>The compiled documentation is available at $HOME/projects/mimmo-build/doc/html.</dd>

   <br />    

    <dt><strong>BUILD_EXAMPLES</strong></dt>
   <dd>
   Controls the examples will be build (examples can be build built if all
   mimmo are compiled). <br> Note that the tests sources in mimmo/test are necessarily compiled and successively 
   available at $HOME/projects/mimmo-build/test/ as well as the compiled examples are available at $HOME/projects/mimmo-build/examples/.
   </dd>

   <br />    

    <dt><strong>BUILD_XMLTUI</strong></dt>
    <dd>
    The BUILD_XMLTUI variable defines if the executable binary has to be compiled. 
    The compiled executable <b>mimmo++</b> is available at $HOME/projects/mimmo-build/binaries/.
    </dd>

   <br />    

<!--   <dt><strong>ENABLE_MPI</strong></dt>
    <dd>
    Controls if mimmo will be compiled with parallel support and allow the dependency on MPI libraries.
    </dd>

    <br />    -->
    
   <dt><strong>MIMMO_MODULES</strong></dt>
    <dd>
    The module variables (available in the advanced mode) can be used to compile each module singularly by setting the related varible ON/OFF.
    <br><b>MIMMO_MODULE_CORE</b> is always compiled, while for <b>MIMMO_MODULE_GEOHANDLERS</b>, <b>MIMMO_MODULE_IOCGNS</b>, <b>MIMMO_MODULE_IOOFOAM</b>, <b>MIMMO_MODULE_IOVTK</b>, 
    <b>MIMMO_MODULE_PROPAGATORS</b> and <b>MIMMO_MODULE_UTILS</b> the compilation can be toggled. <br>Possible dependencies between mimmo modules are automatically resolved.
    Dependencies on external libraries when possible are automatically resolved through find package command. Otherwise the setup for the new variables is required.
    </dd>

    <br />	
    <p>
    Some of the new variables that appear by activating all the modules are:
    </p>
    <br />	

    <dt><strong>CGNS_INCLUDE</strong></dt>
    <dd>
    It defines the include directory of cgns library.
    </dd>
    <dt><strong>CGNS_LIB</strong></dt>
    <dd>
    Path to the libraries directory of cgns package.
    </dd>

    <dt><strong>OPENFOAM_ARCH</strong></dt>
    <dd>
    System architecture of OpenFOAM compilation, tipically it can be 64 or 32 (bit).
    </dd>

    <dt><strong>OPENFOAM_DIR</strong></dt>
    <dd>
    Path to OpenFOAM installation.
    </dd>

    <dt><strong>OPENFOAM_LABEL</strong></dt>
    <dd>
    Maximum size of OpenFOAM label, it can be 32 or 64 (bit).
    </dd>

    <dt><strong>OPENFOAM_OLDVER</strong></dt>
    <dd>
    ON/OFF if the installed OpenFOAM version is older then the Official Foundation 5.0.x release.
    </dd>

    <dt><strong>OPENFOAM_PREC</strong></dt>
    <dd>
    It sets the precision of the installed OpenFOAM, typical values are WM_SP for single precision or WM_DP for double precision.
    </dd>

    <dt><strong>VTK_DIR</strong></dt>
    <dd>
    Sets the installation directory of VTK library (<i>i.e.</i> the directory where the file of a CMake configuration of VTK resides).
    </dd>

</dl>

<h2>Build mimmo</h2>

<p>
After the configuration step, mimmo can be build using the command:
<span class="codebox">
make
</span>
On multi-processor system (let's say two processor), compilation can be
done in parallel typing:
<span class="codebox">
make -j 2
</span>

The compilation can be tested by run from the building folder:
<span class="codebox">
ctest
</span>

</p>

<h2>Install mimmo</h2>

<p>mimmo can be installed typing:
<span class="codebox">
make install
</span>
This will install all the relevant files in directories under the
CMAKE_INSTALL_PREFIX. The executables are installed in ${CMAKE_INSTALL_PREFIX}/bin, the headers files are available
at ${CMAKE_INSTALL_PREFIX}/include
and the libraries are installed in ${CMAKE_INSTALL_PREFIX}/lib/mimmo-${major}.${minor}.${revision}.
</p>
<p>
Remember that if you choose the default installation path or another path without write permission 
you will need administration privileges to install mimmo in.
</p>

<h2>Use mimmo</h2>

<p>mimmo can be used as a library in a custom cmake project. mimmo library can be included as a dependency together with its dependencies (bitpit and optionals).
You can download a template C++ project that includes mimmo library at the following link. 
<li>
  <a href="{{ site.baseurl }}/downloads/mimmo-project.tar.gz">mimmo-project.tar.gz</a>
</li>
</p>
